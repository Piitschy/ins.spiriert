var direc;document.addEventListener("alpine:init",(()=>{direc=window.directusSDK})),document.addEventListener("alpine:init",(()=>{Alpine.data("count",(()=>({count:0,pending:!1,hasUpdate:!1,decrease(){this.count>0&&(this.count--,this.update())},increase(){this.count++,this.update()},update(){this.pending?this.hasUpdate=!0:(this.pending=!0,direc.items("customers").createOne({count:this.count}).then(function(){this.hasUpdate&&(hasUpdate=!1,this.pending=!1,this.update()),this.pending=!1}.bind(this)))},doRefresh(){!this.pending&&Alpine.store("login").loggedIn&&(this.pending=!0,direc.items("customers").readMany({sort:"-date_created",limit:1,timestam:Date.now()}).then(function(i){console.log(0===i.data.length),0===i.data.length?this.count=0:this.count=i.data[0].count,this.hasUpdate=!1,this.pending=!1}.bind(this)))},init(){this.$nextTick((()=>{onLogin=this.doRefresh.bind(this)}))}})))}));var animation=null;function toggleDialog(){console.log("toggle"),null==animation||animation.remove("#loginDialog"),animation=anime({targets:["#loginDialog"],translateY:Alpine.store("login").dialog?-500:0,opacity:Alpine.store("login").dialog?0:1,duration:600,easing:"easeOutQuad"}),Alpine.store("login").dialog=!Alpine.store("login").dialog}document.addEventListener("alpine:init",(()=>{Alpine.data("login",(()=>({email:"",password:"",loading:!1,fpw:!1,fmail:!1,logout(){direc.auth.logout().then((()=>{Alpine.store("login").loggedIn=!1,Alpine.store("login").user=null}))},login(){this.loading=!0,console.log(this.email),direc.auth.login({email:this.email,password:this.password}).then((()=>{Alpine.store("login").loggedIn=!0,this.loading=!1,onLogin()}))}}))),Alpine.store("login",{user:Alpine.$persist([]).as("login_user"),loggedIn:Alpine.$persist(!1),dialog:!1})})),document.addEventListener("alpine:initialized",(()=>{Alpine.store("login").dialog=!Alpine.store("login").loggedIn}));