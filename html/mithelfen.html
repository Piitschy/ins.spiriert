<!DOCTYPE html><!--  Last Published: Wed Jan 12 2022 18:13:30 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="5f7c61c95d12a76a990c0cbe" data-wf-site="5f47eaa5050e92f146d46cd0">
<head>
  <meta charset="utf-8">
  <title>Mithelfen</title>
  <meta content="Mithelfen" property="og:title">
  <meta content="Mithelfen" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/insspiriert.webflow.css" rel="stylesheet" type="text/css">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Cairo:300,regular,600"]  }});</script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
  <script src="https://www.google.com/recaptcha/api.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/@mdi/font@5.x/css/materialdesignicons.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
  <style>
    .my-event {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      border-radius: 2px;
      background-color: #1867c0;
      color: #ffffff;
      border: 1px solid #1867c0;
      font-size: 12px;
      padding: 3px;
      cursor: pointer;
      margin-bottom: 1px;
      left: 4px;
      margin-right: 8px;
      position: relative;
    }
    .my-event.with-time {
      position: absolute;
      right: 1px;
      margin-right: 0px;
    }
  </style>
</head>
<body>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=5f47eaa5050e92f146d46cd0" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12"></script>
  <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script>
  <script>
function loadGAonConsent(){
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-180781187-1', 'auto');
  ga('set', 'anonymizeIp', true);
  ga('send', 'pageview');
  var gascript = document.createElement("script");
  gascript.async = true;
  gascript.src = "https://www.google-analytics.com/analytics.js";
  document.getElementsByTagName("head")[0].appendChild(gascript, document.getElementsByTagName("head")[0]);               
}
if (document.cookie.split(';').filter(function(item) {
    return item.indexOf('cookieconsent_status=allow') >= 0
}).length) {
    loadGAonConsent();
}
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#000000",
      "text": "#ffffff"
    },
    "button": {
      "background": "#ffffff",
      "text": "#000000"
    }
  },
  "theme": "edgeless",
  "type": "opt-in",
  "content": {
    "message": "Wir benutzen Kekse. \nDon't judge us - Kekse sind nice! Für mehr Infos schaue in das ",
    "dismiss": "Nope",
    "allow": "Cool",
    "link": "Rezept. (Datenschutzerklärung)",
    "href": "https://ins.spiriert.de/datenschutz"
  },
		onStatusChange: function(status, chosenBefore) {
		var type = this.options.type;
		var didConsent = this.hasConsented();
		if (type == 'opt-in' && didConsent) {
		// enable cookies
		loadGAonConsent();
		}
		}
	});
</script>
  <script>
  var app = new Vue({
    el: '#cal',
    vuetify: new Vuetify(),
      template: `<v-app>
      <center>
      <v-card elevation="10">
            <v-sheet height="64" dark>
              <v-toolbar
                flat
              >
                <v-btn
                  v-if="type != 'month'"
                  outlined
                  class="mr-4"
                  color="grey darken-2"
                  @click="type = 'month'"
                  >
                  <v-icon>
                    mdi-calendar-range
                  </v-icon>
                </v-btn>
                <v-btn
			      v-if="type != 'week'"
                  outlined
                  class="mr-4"
                  color="grey darken-2"
                  @click="type = 'week'"
                  >Woche
                </v-btn>
                <v-btn
                  fab
                  text
                  small
                  color="grey darken-2"
                  @click="prev"
                  >
                  <v-icon small>
                    mdi-chevron-left
                  </v-icon>
                </v-btn>
                <v-toolbar-title v-if="$refs.calendar && type == 'month'">
                  {{ $refs.calendar.title }}
                </v-toolbar-title>
                <v-btn
                  fab
                  text
                  small
                  color="grey darken-2"
                  @click="next"
                  >
                  <v-icon small>
                    mdi-chevron-right
                  </v-icon>
                </v-btn>
                <v-btn
                  outlined
                  class="mr-4"
                  color="grey darken-2"
                  @click="setToday"
                  >Heute
                </v-btn>
              </v-toolbar>
            </v-sheet>
            <v-sheet height="800" dark>
              <v-calendar
                ref="calendar"
                v-model="focus"
                color="#202020"
                :events="events"
                :type="type"
                @click:event="showEvent"
                @click:more="viewDay"
                @click:date="viewDay"
                locale="de-de" 
              ></v-calendar>
              <v-menu
                v-model="selectedOpen"
                :close-on-content-click="false"
                :activator="selectedElement"
                offset-x
              >
                <v-card
                  color="grey lighten-4"
                  flat
                >
                  <v-toolbar
                    :color=selectedEvent.color
                    dark
                  >
                    <v-toolbar-title v-html="selectedEvent.name"></v-toolbar-title>
                  </v-toolbar>
                  <v-card-text>
                    {{selectedEvent.startTime}} - {{selectedEvent.endTime}} <br>
                    {{selectedEvent.loc}}
                    <span v-html="selectedEvent.details"></span>
                  </v-card-text>
                  <v-card-actions>
                    <v-btn
                      text
                      color="secondary"
                      @click="selectedOpen = false"
                    >
                      Schließen
                    </v-btn>
                  </v-card-actions>
                </v-card>
              </v-menu>
            </v-sheet>
        </v-card>
        </center>
      </v-app>`,
    data() {
      return {
        url: 'https://www.googleapis.com/calendar/v3/calendars/ins%40spiriert.de/events?orderBy=startTime&singleEvents=true&timeMax=2022-12-31T00%3A00%3A00Z&timeMin=2022-01-01T00%3A00%3A00Z',
        auth: '&key=AIzaSyC2jS8Z_Fqqo2PAQ91DU7n9d4Eky6Etb_Q',
        focus: '',
        type: 'month',
        typeToLabel: {
          month: 'Monat',
          week: 'Woche',
          day: 'Tag'
        },
        selectedEvent: {},
        selectedElement: null,
        selectedOpen: false,
        events: [],
        locs:{
          luther:{
            name: "Lutherkirche",
            color: "#00c2fb"
          },
          lukas:{
            name: "Lukaskirche",
            color: "#47E844"
          }
        }
      }
    },
    computed: {
      now() {
        return new Date().toISOString()
      },
      today () {
        return this.now.substr(0, 10)
      },
      time () {
        return this.now.substr(11, 5)
      },
    },
    methods: {
      date2sting(key,time_only=false){
        const dateTime = new Date(key.dateTime || key.date)
        dateTime.setHours(dateTime.getHours() + 2)
        dateTimeStr = dateTime.toISOString()
        const tag = dateTimeStr.substr(0, 10)
        const zeit = dateTimeStr.substr(11, 5)
        if (time_only) {
          return zeit
        }
        return tag + ' ' + zeit
      },
      filterEvents(data){
        console.log(data)
        const items = data.items
        let events = []
        for (let item of items) {
          if (item.status !== 'confirmed'){
            continue
          }
          var color = ""
          const loc = String(item.location)
          for (l in this.locs) {
            if (loc.includes(this.locs[l].name)) {
              color = this.locs[l].color
              break
            }
          }
          let event = {
            start: this.date2sting(item.start),
            end: this.date2sting(item.end),
            startTime: this.date2sting(item.start,true),
            endTime: this.date2sting(item.end,true),
            name: item.summary,
            loc: loc,
            color: color
          }
          events.push(event)
        }
        console.log(events)
        this.events = events
      },
      getEvents () {
        fetch(this.url + this.auth)
          .then(response => response.json())
          .then(data => this.filterEvents(data))
      },
      viewDay ({ date }) {
        this.focus = date
        this.type = 'day'
      },
      getEventColor (event) {
        return event.color
      },
      setToday () {
        this.focus = ''
      },
      prev () {
        this.$refs.calendar.prev()
      },
      next () {
        this.$refs.calendar.next()
      },
      showEvent ({ nativeEvent, event }) {
        const open = () => {
          this.selectedEvent = event
          this.selectedElement = nativeEvent.target
          requestAnimationFrame(() => requestAnimationFrame(() => this.selectedOpen = true))
        }
        if (this.selectedOpen) {
          this.selectedOpen = false
          requestAnimationFrame(() => requestAnimationFrame(() => open()))
        } else {
          open()
        }
        nativeEvent.stopPropagation()
      }
    },
    mounted() {
      this.$refs.calendar.scrollToTime(this.time)
      this.getEvents()
    }
  })
</script>
</body>
</html>